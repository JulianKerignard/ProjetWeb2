# Activation du module de réécriture d'URL
RewriteEngine On

# Base du chemin - Modifiez cette ligne pour qu'elle corresponde à votre installation
RewriteBase /ProjetWeb2/

# Ne pas appliquer les règles aux fichiers et dossiers existants
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rediriger toutes les requêtes vers index.php
RewriteRule ^(.*)$ index.php [QSA,L]

# IMPORTANT: Permettre l'accès aux fichiers statiques
# Désactivation temporaire de la protection des dossiers pour le développement
# RewriteRule ^(public)($|/) - [L]

# Empêcher l'accès aux dossiers sensibles SAUF public
# RewriteRule ^(?!public/)(config|controllers|models|views|includes)/ - [F,L]

# Protection contre les injections XSS
<IfModule mod_headers.c>
    Header set X-XSS-Protection "1; mode=block"
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Compression GZIP
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/x-javascript application/json
</IfModule>

# Protection du fichier .htaccess
<Files .htaccess>
    Order Allow,Deny
    Deny from all
</Files>